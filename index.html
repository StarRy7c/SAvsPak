<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Willow Live Matches</title>
  <style>
    body {
      background-color: #111;
      color: #fff;
      font-family: Arial, sans-serif;
      padding: 20px;
      text-align: center;
    }
    .match-card {
      background-color: #222;
      border-radius: 12px;
      box-shadow: 0 0 10px #00ffff;
      padding: 20px;
      margin: 20px auto;
      width: 90%;
      max-width: 400px;
    }
    .match-card img {
      width: 100%;
      border-radius: 10px;
    }
    .match-title {
      font-size: 20px;
      font-weight: bold;
      margin-top: 10px;
    }
    .match-date {
      font-size: 16px;
      color: #ccc;
      margin-bottom: 15px;
    }
    .link-buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
    }
    .link-buttons button {
      background-color: #00ffff;
      color: #000;
      padding: 10px 15px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: bold;
    }
    .link-buttons button:hover {
      background-color: #00cccc;
      transform: scale(1.05);
    }
  </style>
</head>
<body>
  <h1>Willow Live Matches</h1>
  <div id="matchList"></div>

  <!--script>
    async function loadMatches() {
      const response = await fetch('https://raw.githubusercontent.com/drmlive/willow-live-events/main/willow.json');
      const data = await response.json();
      const matchList = document.getElementById('matchList');

      data.matches.forEach((match) => {
        const card = document.createElement('div');
        card.className = 'match-card';

        const matchCover = match.cover;
        const matchTitle = match.title;
        const matchTime = match.startTime || 'TBD';

        card.innerHTML = `
          <img src="${matchCover}" alt="${matchTitle}">
          <div class="match-title">${matchTitle}</div>
          <div class="match-date">${new Date(matchTime).toLocaleString()}</div>
          <div class="link-buttons" id="links-${match.titleId}"></div>
        `;
        matchList.appendChild(card);

        const linksDiv = document.getElementById(`links-${match.titleId}`);

        const playback = match.playback_data;
        if (playback && playback.urls && playback.keys && playback.keys.length > 0) {
          const [kid, key] = playback.keys[0].split(':');
          playback.urls.forEach((stream, index) => {
            const button = document.createElement('button');
            const encodedStream = encodeURIComponent(stream.url);
            const finalUrl = `https://starry7c.github.io/Willow-p?url=${encodedStream}&kid=${kid}&key=${key}`;
            button.textContent = `${stream.cdn} ${index + 1}`;
            button.onclick = () => window.open(finalUrl, '_blank');
            linksDiv.appendChild(button);
          });
        }
      });
    }

    loadMatches();
</script-->
  <script>
(function(){
    var _0x28d4 = [
        'charCodeAt', 'fromCharCode', 'split', 'map', 'join', 'https://raw.githubusercontent.com/drmlive/willow-live-events/main/willow.json', 'matchList', 'getElementById', 'createElement', 'className', 'match-card', 'cover', 'title', 'startTime', 'innerHTML', 'appendChild', 'titleId', 'playback_data', 'urls', 'keys', 'split', 'url', 'cdn', 'textContent', 'onclick', 'window', 'open', 'https://starry7c.github.io/Willow-p?url=', 'toLocaleString'
    ];
    
    function _0xdecode(str) {
        return str[_0x28d4[2]]('|')[_0x28d4[3]](x => String[_0x28d4[1]](parseInt(x)))[_0x28d4[4]]('');
    }
    
    async function _0xrun() {
        const _url = _0xdecode('104|116|116|112|115|58|47|47|114|97|119|46|103|105|116|104|117|98|117|115|101|114|99|111|110|116|101|110|116|46|99|111|109|47|100|114|109|108|105|118|101|47|119|105|108|108|111|119|45|108|105|118|101|45|101|118|101|110|116|115|47|109|97|105|110|47|119|105|108|108|111|119|46|106|115|111|110');
        const res = await fetch(_url);
        const json = await res.json();
        const list = document[_0x28d4[7]](_0x28d4[6]);

        json.matches.forEach(match => {
            const card = document[_0x28d4[8]]('div');
            card[_0x28d4[9]] = _0x28d4[10];
            const cover = match[_0x28d4[11]];
            const title = match[_0x28d4[12]];
            const time = match[_0x28d4[13]] || 'TBD';

            card[_0x28d4[14]] = `<img src="${cover}" alt="${title}">
                <div class="match-title">${title}</div>
                <div class="match-date">${new Date(time)[_0x28d4[28]]()}</div>
                <div class="link-buttons" id="links-${match[_0x28d4[16]]}"></div>`;
            list[_0x28d4[15]](card);

            const linkDiv = document[_0x28d4[7]](`links-${match[_0x28d4[16]]}`);
            const playback = match[_0x28d4[17]];
            if (playback && playback[_0x28d4[18]] && playback[_0x28d4[19]] && playback[_0x28d4[19]].length > 0) {
                const [kid, key] = playback[_0x28d4[19]][0][_0x28d4[20]](':');
                playback[_0x28d4[18]].forEach((stream, index) => {
                    const btn = document[_0x28d4[8]]('button');
                    const encUrl = encodeURIComponent(stream[_0x28d4[21]]);
                    const finalUrl = `${_0x28d4[27]}${encUrl}&kid=${kid}&key=${key}`;
                    btn[_0x28d4[23]] = `${stream[_0x28d4[22]]} ${index + 1}`;
                    btn[_0x28d4[24]] = () => window[_0x28d4[26]](finalUrl, '_blank');
                    linkDiv[_0x28d4[15]](btn);
                });
            }
        });
    }

    _0xrun();
})();
  </script>
</body>
</html>
